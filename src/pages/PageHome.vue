<template>
  <div>
    <div v-if="pageLoader_isDataLoaded" class="container">
      <div  class="container">
        <section class="section">
          <div>
            <h1 class="title">Instansi</h1>
            <div class="columns cover is-multiline is-mobile">
              <InstansiItem v-for="instansi in allInstansi" :key="instansi.id" :instansi="instansi"/>
            </div>
          </div>
        </section>
      </div>
    </div>
    <div v-else class="container">
      <AppSpinner />
    </div>
 </div>
</template>

<script>
  import PageLoader from '@/mixins/PageLoader'
  import AppSpinner from '../components/shared/AppSpinner'
  import InstansiItem from '../components/InstansiItem'
  import { mapActions,mapState } from "vuex";
  export default {
    components:{
      InstansiItem,
      AppSpinner
    },
     mixins:[PageLoader],
    computed: {
      ...mapState({
        allInstansi: state => state.instansi.items
      })
    },
     created() {
       Promise.all([this.fetchAllInstansi()])
       .then(() => {
         this.pageLoader_resolveData()})
       .catch(()=>{
         this.pageLoader_resolveData()
       })
     },
     methods: {
       ...mapActions('instansi',['fetchAllInstansi'])
     },
  }
</script>

<style scoped>
  .is-rounded {
    border-radius: 10px !important;
  }
</style>
